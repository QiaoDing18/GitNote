title: 进程线程区别
author: 乔丁
tags:
  - 闲聊
categories:
  - chat
date: 2018-04-27 17:19:00
description: 操作系统相关
---


进程和线程都是一个时间段的描述，是CPU工作时间段的描述。


## 进程和线程的区别：
1、进程是资源分配和调度的一个独立单元，线程是CPU调度的基本单元
2、同一个进程中可以包括多个线程，并且线程共享整个进程的资源（寄存器、堆栈、上下文），一个进程至少包括一个线程
3、进程的结束后它拥有的所有线程都将销毁，而线程的结束不会影响同个进程中的其他的其他线程的结束
4、线程是轻量级的进程，它的创建和销毁所需要的时间比进程中小很多，所有操作系统中的执行功能都是创建线程去完成的
5、线程中执行时一般都要进行同步和互斥，因为他们共享同一进程的所有资源


## 进程
#### 进程控制块（PCB）
进程（Process）是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位

进程创建时，为该进程生成一个PCB；进程终止时，回收PCB。PCB由链表实现（为了动态插入和删除）

PCB包含信息：1、进程状态（state）；2、进程标识信息（uid、gid）；3、定时器（time）；4、用户可见寄存器、控制状态寄存器、栈指针等（tss）

每个进程都有一个非负的唯一进程ID（PID）。虽然是唯一的，但是PID可以重用，当一个进程终止后，其他进程就可以使用它的PID了。
PID为0的进程为调度进程，该进程是内核的一部分，也称为系统进程；PID为1的进程为init进程，它是一个普通的用户进程，但是以超级用户特权运行；PID为2的进程是页守护进程，负责支持虚拟存储系统的分页操作。

## 死锁
概念：相互等待资源而产生的一种僵持状态，如果没有外力干预将一直持续这个状态
死锁的原因：资源不足、相互竞争资源、循环等待、请求与保持
死锁的必要条件：互斥、不可抢占、循环等待、请求与保持
处理死锁：因为互斥不可改变，所以只能破坏其他三个条件中的一个来解除死锁
处理方法：剥夺资源、杀死其中一个线程

## 进程的集中状态
1、run（运行状态）：正在运行的进程或在等待队列中等待的进程，等待的进程只要得到CPU就可以运行
2、sleep（可中断休眠状态）：相当于阻塞或在等待的状态
3、D（不可中断休眠状态）：在磁盘上的进程
4、T（停止状态）：这中状态无法直观的看见，因为是进程停止后就释放了资源，所以不会留在linux中
5、Z（僵尸状态）：该进程本应该已经执行完毕，但是该进程的父进程却无法完整的将该进程结束掉，而造成该进程一直存在于内存中

## 线程
是程序执行流的最小单元
线程也有就绪、阻塞和运行三种基本状态